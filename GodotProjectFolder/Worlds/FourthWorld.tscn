[gd_scene load_steps=18 format=3 uid="uid://dctj4hq7wjib1"]

[ext_resource type="Texture2D" uid="uid://dxe6w32mi1min" path="res://sonic_sky.png" id="1_eli8q"]
[ext_resource type="Texture2D" uid="uid://b0mvis1g3nl6w" path="res://Textures/background3.png" id="3_wbitg"]
[ext_resource type="Script" path="res://KillPlane.gd" id="4_trc8x"]
[ext_resource type="Script" path="res://CameraArm.gd" id="5_egant"]
[ext_resource type="Shader" path="res://Outline.gdshader" id="6_4xgu5"]
[ext_resource type="PackedScene" uid="uid://braenof5sfums" path="res://Player/Player.tscn" id="7_cdyhq"]
[ext_resource type="PackedScene" uid="uid://b2sqmde2h8gfg" path="res://PathfindingEnemy.tscn" id="11_dwh2e"]
[ext_resource type="Texture2D" uid="uid://hvp1i1a7eemo" path="res://TextArrowIcon.png" id="12_411re"]
[ext_resource type="PackedScene" uid="uid://cmvlgwtqxqhl6" path="res://suitguy_with_nose.tscn" id="12_nh05a"]

[sub_resource type="PanoramaSkyMaterial" id="PanoramaSkyMaterial_k6rs0"]
panorama = ExtResource("1_eli8q")

[sub_resource type="Sky" id="Sky_mblu3"]
sky_material = SubResource("PanoramaSkyMaterial_k6rs0")

[sub_resource type="Environment" id="Environment_3n2rb"]
background_mode = 1
background_color = Color(0.321569, 0.321569, 0.321569, 1)
background_canvas_max_layer = 1
sky = SubResource("Sky_mblu3")
sky_custom_fov = 65.5
ambient_light_source = 2
ambient_light_color = Color(0.647059, 0.647059, 0.647059, 1)
fog_light_energy = 2.28
fog_sun_scatter = 3.71
fog_density = 0.007

[sub_resource type="NavigationMesh" id="NavigationMesh_cq3md"]
vertices = PackedVector3Array(1, -1.804, -6.25, 1.75, -1.804, -7, -5.75, -1.804, -7, -6, -1.804, 7, 1.25, -1.804, 7, 1.25, -1.804, 2.75, -13, -1.804, 0, -13, -1.804, 7, -6, -1.804, 7, -5.75, -1.804, -7, -13, -1.804, -7, -13, -1.804, 0, -6, -1.804, 7, 1.25, -1.804, 2.75, 1, -1.804, -6.25, 13, -1.804, -7, 10.5, -1.804, -7, 11.25, -1.804, -6.25, 1.75, -1.804, 3.25, 1.25, -1.804, 2.75, 1.25, -1.804, 7, 13, -1.804, 0, 13, -1.804, -7, 11.25, -1.804, -6.25, 11.25, -1.804, 2.25, 1.25, -1.804, 7, 13, -1.804, 7, 10.25, -1.804, 3.25, 1.75, -1.804, 3.25, 13, -1.804, 7, 13, -1.804, 0, 11.25, -1.804, 2.25, 13, -1.804, 7, 11.25, -1.804, 2.25, 10.25, -1.804, 3.25, 3, 0.196001, -5, 3, 0.196001, 1, 5, 0.196001, 1, 5, 0.196001, -5, 7, 2.196, -5, 7, 2.196, 1, 9, 2.196, 1, 9, 2.196, -5, 7.25, -1.804, -4.75, 7.25, -1.804, 1, 9, -1.804, 1, 9, -1.804, -4.75)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(5, 4, 3), PackedInt32Array(8, 7, 6), PackedInt32Array(10, 9, 11), PackedInt32Array(11, 9, 14), PackedInt32Array(11, 14, 13), PackedInt32Array(11, 13, 12), PackedInt32Array(17, 16, 15), PackedInt32Array(20, 19, 18), PackedInt32Array(22, 21, 23), PackedInt32Array(23, 21, 24), PackedInt32Array(28, 27, 25), PackedInt32Array(25, 27, 26), PackedInt32Array(31, 30, 29), PackedInt32Array(34, 33, 32), PackedInt32Array(38, 37, 35), PackedInt32Array(35, 37, 36), PackedInt32Array(42, 41, 39), PackedInt32Array(39, 41, 40), PackedInt32Array(46, 45, 43), PackedInt32Array(43, 45, 44)]
cell_height = 0.1
agent_height = 2.0
agent_radius = 1.0

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_oqdx7"]
shading_mode = 2
diffuse_mode = 1
albedo_texture = ExtResource("3_wbitg")
uv1_scale = Vector3(0.125, 0.125, 0.125)
uv1_triplanar = true
uv1_world_triplanar = true
texture_filter = 0

[sub_resource type="WorldBoundaryShape3D" id="WorldBoundaryShape3D_qphd1"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_dt056"]
render_priority = -128
shader = ExtResource("6_4xgu5")
shader_parameter/depth_addend = 0.0
shader_parameter/depth_multiplier = 3.0
shader_parameter/is_inverted = false
shader_parameter/outline_color = Color(0.0705882, 0.0705882, 0.105882, 1)
shader_parameter/transparency = 1.0

[sub_resource type="QuadMesh" id="QuadMesh_x0ohu"]
material = SubResource("ShaderMaterial_dt056")
size = Vector2(2, 2)

[node name="FourthWorld" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_3n2rb")

[node name="DirectionalLight3d" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.784582, -0.536957, 0.310012, -2.27666e-08, 0.5, 0.866025, -0.620025, -0.679468, 0.392291, 0, 0, 0)
shadow_enabled = true

[node name="Interface" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="Environment" type="Node3D" parent="."]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="Environment"]
navmesh = SubResource("NavigationMesh_cq3md")
metadata/_edit_lock_ = true

[node name="Ground" type="CSGBox3D" parent="Environment/NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -6, 0)
use_collision = true
size = Vector3(28, 8.008, 16)
material = SubResource("StandardMaterial3D_oqdx7")

[node name="Ground2" type="CSGBox3D" parent="Environment/NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8, 0, -2)
use_collision = true
size = Vector3(4, 4, 8)
material = SubResource("StandardMaterial3D_oqdx7")

[node name="Ground3" type="CSGBox3D" parent="Environment/NavigationRegion3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4, -1, -2)
use_collision = true
size = Vector3(4, 2, 8)
material = SubResource("StandardMaterial3D_oqdx7")

[node name="KillPlane" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -37.5048, 8.23268)
collision_mask = 2
script = ExtResource("4_trc8x")

[node name="CollisionShape3d" type="CollisionShape3D" parent="KillPlane"]
transform = Transform3D(15, 0, 0, 0, 15, 0, 0, 0, 15, 0, 0, 0)
shape = SubResource("WorldBoundaryShape3D_qphd1")

[node name="CameraArm" type="Node3D" parent="." node_paths=PackedStringArray("target")]
transform = Transform3D(0.94049, 0.116226, -0.319328, 0, 0.939692, 0.34202, 0.339821, -0.321666, 0.883771, 0, -2, 0)
script = ExtResource("5_egant")
target = NodePath("../Player")

[node name="Camera3d" type="Camera3D" parent="CameraArm"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 50)
fov = 20.0

[node name="Outline" type="MeshInstance3D" parent="CameraArm/Camera3d"]
transform = Transform3D(1, 7.45058e-09, -1.49012e-07, 7.45058e-09, 1, 5.96046e-08, -1.19209e-07, -5.96046e-08, 1, 9.53674e-07, -2.86102e-06, -4.99999)
mesh = SubResource("QuadMesh_x0ohu")
skeleton = NodePath("../../../..")

[node name="Player" parent="." instance=ExtResource("7_cdyhq")]
transform = Transform3D(0.670569, 0, 0.741847, 0, 1, 0, -0.741847, 0, 0.670569, -8.03407, -0.494704, -1.65104)

[node name="PathfindingEnemy" parent="." instance=ExtResource("11_dwh2e")]
transform = Transform3D(-0.999976, 0, -0.00687657, 0, 1, 0, 0.00687657, 0, -0.999976, 0.424739, -0.484544, 5.27399)
can_jump = true
move_speed = 7.0
move_accel = 40.0
move_decel = 30.0

[node name="Sprite3D" type="Sprite3D" parent="."]
transform = Transform3D(0.2, 0, 0, 0, 0.2, 0, 0, 0, 0.2, 0, 0, 0)
billboard = 1
no_depth_test = true
fixed_size = true
alpha_cut = 1
texture_filter = 0
texture = ExtResource("12_411re")

[node name="suitguy with nose" parent="." instance=ExtResource("12_nh05a")]
transform = Transform3D(0.432936, 0, 0.199431, 0, 0.530557, 0, -0.199431, 0, 0.432936, -11.146, -1.09851, -1.55051)

[connection signal="body_entered" from="KillPlane" to="KillPlane" method="_on_kill_plane_body_entered"]
